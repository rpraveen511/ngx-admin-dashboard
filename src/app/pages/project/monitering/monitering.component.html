<div class="container-fluid">
  <div class="navigator col-2">
    <daypilot-navigator [config]="configNavigator" [events]="events" [(date)]="date" (dateChange)="changeDate($event)"
      #navigator></daypilot-navigator>

    <div class="dropdowns">
      <div class="dropdown">
        <label><b>NODE : &nbsp;</b></label>
        <select id="node" [(ngModel)]="server.node" (change)="selectNode($event)">
          <option *ngFor="let node of nodes" value="{{node.label}}">
            {{ node.label }}
          </option>
        </select>
      </div>
      <div class="dropdown">
        <label><b>JOB TYPE : &nbsp;</b></label>
        <select id="jobType" [(ngModel)]="server.jobType" (change)="selectJobType($event)">
          <option *ngFor="let jobType of jobTypes" value="{{jobType.value}}">
            {{ jobType.name }}
          </option>
        </select>
      </div>
      <div class="dropdown">
        <label><b>STATUS : &nbsp;</b></label>
        <select id="statusType" [(ngModel)]="server.statusType" (change)="selectStatus($event)">          
          <option *ngFor="let statusType of statusTypes" value="{{statusType.value}}">
            {{ statusType.name }}
          </option>
        </select>
      </div>
    </div>

    <!-- <div class="legend" *ngIf="legendTitle.length > 0">
      <div class="legend-view" *ngFor="let item of legendTitle">
        <div>
          <span class="legend-marker" [ngStyle]="{'background': item.backColor}"></span>
        </div>
        <div class="legend-text" title={{item.text}}>{{ item.text}}
        </div>
      </div>
    </div> -->

    <div class="legend">
      <div class="legend-title">
        <b class="legend-text">Event Type</b>
      </div>
      <div class="legend-view">
        <div><span class="legend-marker" style="background : #40e6a2;"></span></div>
        <div class="legend-text">Connector</div>
      </div>
      <div class="legend-view">
        <div><span class="legend-marker" style="background : rgb(51, 102, 255);"></span></div>
        <div class="legend-text">Command</div>
      </div>
      <div class="legend-view">
        <div><span class="legend-marker" style="background : rgb(230, 145, 64);"></span></div>
        <div class="legend-text">Partition</div>
      </div>
    </div>

  </div>
  <div class="content col-10">
    <div class="buttons">
      <button (click)="viewDay()" [class]="this.configNavigator.selectMode == 'Day' ? 'selected' : ''">Day</button>
      <button (click)="viewWeek()" [class]="this.configNavigator.selectMode == 'Week' ? 'selected' : ''">Week</button>
      <button (click)="viewMonth()"
        [class]="this.configNavigator.selectMode == 'Month' ? 'selected' : ''">Month</button>
    </div>

    <daypilot-calendar [config]="configDay" [events]="events" (click)="openDilog(dialog)" #day>
    </daypilot-calendar>
    <daypilot-calendar [config]="configWeek" [events]="events" (click)="openDilog(dialog)" #week>
    </daypilot-calendar>
    <daypilot-month [config]="configMonth" [events]="events" (click)="openDilog( dialog)" #month>
    </daypilot-month>
  </div>
</div>

<ng-template #dialog let-data let-ref="dialogRef">
  <nb-card>
    <nb-card-header>{{  eventData?.text }}</nb-card-header>
    <nb-card-body>
      <p>Event ID : &nbsp;{{  eventData?.id }}</p>
      <p>Starting Time : &nbsp;{{  eventData?.start | date }}</p>
      <p>Ending Time : &nbsp;{{  eventData?.end | date}}</p>
    </nb-card-body>
    <nb-card-footer class="dialog-footer">
      <button nbButton (click)="ref.close()">Close</button>
    </nb-card-footer>
  </nb-card>
</ng-template>